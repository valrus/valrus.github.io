<!DOCTYPE html>

<html xmlns="https://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    


<title>small clever rooms</title>

    <link rel="icon" type="image/png" href="/assets/images/favicon.png" />
    <link rel="shortcut icon" type="image/png" href="/assets/images/favicon.png" />
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <!--  link rel="stylesheet" type="text/css" href="/assets/css/reset.css" /> -->
    
<link rel="stylesheet" type="text/css" href="/assets/css/rosario.css" />
<link rel="stylesheet" type="text/css" href="/assets/css/bitter.css" />
<link rel="stylesheet" type="text/css" href="/assets/css/inconsolata.css" />
<!--  link rel="stylesheet" type="text/css" href="/assets/css/tufte-pandoc-css/pandoc.css" /> -->
<link rel="stylesheet" type="text/css" href="/assets/css/tufte-css/pandoc-solarized.css" />
<link rel="stylesheet" type="text/css" href="/assets/css/tufte-css/tufte-extra.css" />
<link rel="stylesheet" type="text/css" href="/assets/css/tufte-css/tufte.css" />

<link rel="stylesheet" type="text/css" href="/assets/css/blogpost.css" />

<link rel="stylesheet" href="/assets/css/bytebox.css" type="text/css" media="screen" />
<script src="/assets/js/bytebox.min.js" type="text/javascript"></script>

  </head>

  <body>
    <div id="img_logo" style="display: none;"><img src="/assets/images/title-with-bg.png" /></div>
    

<article>
    <p id="blog-p">
        <span id="blogdesc" class="marginnote">
            

            Back to
            <a href="
/livingroom/
">
                <span class="newthought">Small Clever Rooms</span>
            </a>
            
<br />
<a class="sidebar-item" href="/feed.xml">RSS Feed</a>

        </span>
    </p>
    <h1>
Spacemacs to Doom Migration
</h1>
    
    
<p>I’ve been trying out <a href="https://github.com/hlissner/doom-emacs">Doom Emacs</a> recently, because I guess I can’t go more than like 2 years without wanting to throw my current text editing situation out the window and replace it with a new one.</p>
<p>That current text editing situation is <a href="/2015/04/07/Spacemacs/index.html">Spacemacs</a>. It’s starting to feel kind of clunky, with too many moving parts to configure straightforwardly, slow to start up and slow to receive updates. Aside from those complaints, though, it’s honestly still pretty great: it’s Emacs so it has support for everything under the sun, the “configuration layer” system is actually a very nice way to organize functionality, and the “multi-tiered leader” keybinding paradigm is the best of any editor I’ve ever used, so much so that I’m not sure I could switch to another one at this point. That rather limits my options.</p>
<p>Doom is an Emacs configuration framework that, in the words of its creator,</p>
<blockquote>
<p>strives to be fast, fabulous and hacker friendly. It is tailored for neckbeards with blue belts or better in command-line-fu, Elisp and git.</p>
</blockquote>
<p><span class="marginnote"> <a href="/assets/images/posts/Spacemacs_To_Doom_Migration/cacochan.png" rel="bytebox"> <img alt="Cute drawing of a Doom cacodemon saying 'Yay evil!'" src="/assets/images/posts/Spacemacs_To_Doom_Migration/cacochan.png" /> </a> Plus there’s this guy! Aww! </span></p>
<p>I… guess I’m those things? I guess using this would be a good way to find out? I don’t know, “fast” just sounds really good right now. Anyway here’s a summary of what I found out in trying to switch from Spacemacs to Doom, in case someone finds it useful.</p>
<section id="should-i-bother" class="level2">
<h2>Should I bother?</h2>
<p>First off, some subjective impressions from easing into Doom over a period of one or two weeks.</p>
<p>It does generally feel faster. Definitely much quicker to start up, though I think a lot of my long startup time with Spacemacs was loading my workspace with a lot of open Ruby buffers. On the other hand, loading a bunch of buffers shouldn’t take as long as it did (we’re talking a minute or more), and…</p>
<p>If something goes wrong in Spacemacs, it can be very hard to figure out why. There are a lot of moving parts all interacting with each other. Doom feels more manageable, but this may just be because I haven’t been using it long enough to accrete a lot of possibly hacky changes of my own.</p>
<p>Spacemacs looked pretty nice, for Emacs, but Doom does (subjectively) look even better. I haven’t felt the need to mess with the aesthetics as much, which is good because that was a source of considerable frustration with Spacemacs.</p>
<p>Spacemacs is definitely more “batteries included” than Doom, and a more comprehensively customized Emacs experience. The bindings are tweaked to be more “Vim-esque” in basically every mode Spacemacs provides through its clever “evilification” process, and language layers tend to have more functionality out of the box (e.g. auto-closing tags in Web mode). Still, there haven’t been too many things I find myself really missing in Doom, though I should say I’ve been mostly working with Ruby on Rails in it.</p>
<p>Doom’s developer is very accessible via a <a href="https://discord.gg/bcZ6P3y">Discord chat</a>. Spacemacs’s isn’t so much — it’s kind of been a victim of its own success in that way — but it has a bigger community. On the other hand, I’ve found Doom’s source a little easier to inspect to figure things out for myself. Ultimately, the amount of support available for each is a wash: I’ve felt the need to ask for help less with Doom, but there also seem to be fewer places to get it if I need it.</p>
</section>
<section id="how-do-i-set-it-up" class="level2">
<h2>How do I set it up</h2>
<p>Doom is in a bit of a state of flux right now, so I’m going to try to make these instructions future-proof: Go to the <a href="https://github.com/hlissner/doom-emacs">Doom github</a> and follow the instructions in the README. If they work, great! If they don’t, it might be because the <code>master</code> branch is broken. Try switching to <code>develop</code> (using your <em>blue belt in Git</em>) and follow the instructions in <em>that</em> README. If that doesn’t work either, I guess someone probably opened an issue about it? Find that. It’s the work of one person so if you have a weird setup and it breaks and you don’t want to figure out why, Doom might just not be for you. It definitely wasn’t the first time I tried it, so I don’t mean that as a dig or anything! There will just be a certain amount of figuring things out yourself that will come with the territory, and switching might not really be worth that friction.</p>
</section>
<section id="where-do-i-put-my-shit" class="level2">
<h2>Where do I put my shit</h2>
<p>What you know as “layers” in Spacemacs are, more or less, called “modules” in Doom. You’re going to be creating a private <a href="https://github.com/hlissner/doom-emacs/wiki/Modules">module</a>. It will be located at either <code>~/.doom.d</code> or <code>config/doom</code> if you’re doing the whole <a href="https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html">XDG base directory</a> thing.</p>
<p>Unlike in Spacemacs where a private layer is just the “recommended” way of storing your configuration (you could, in many cases, have it all in your <code>.spacemacs</code> if you wanted), in Doom your configuration directory just <em>is</em> a private module. It has the following parts, each of which corresponds roughly to something you know and love from Spacemacs:</p>
<ul>
<li><code>init.el</code> - Every module has one, but for our basic purposes the one in your private module will be equivalent to the <code>setq dotspacemacs-configuration-layers</code> in your <code>.spacemacs</code>. Basically it’s one call to the <code>doom!</code> macro to declare the features that you want to use. I guess you can put other very early configuration in there but I haven’t yet seen a reason to do so.</li>
<li><code>packages.el</code> - You might <em>think</em> this is like a Spacemacs layer’s <code>packages.el</code>, but no! It is a simple declarative list of packages using the <code>package!</code> macro that does little but add packages to be installed.</li>
<li><code>config.el</code> - A combination of <code>user-config</code> in <code>.spacemacs</code>, <code>config.el</code> in your private layer, and <code>packages.el</code> in your private layer. I think. That’s a lot for one file but you can have other files starting with a <code>+</code> and load them manually, like <code>(load +more)</code> to load <code>+more.el</code>. Presumably this is to break up all the configuration that would otherwise be unceremoniously dumped in <code>config.el</code>.</li>
<li><code>autoload.el</code> - Equivalent to <code>funcs.el</code> in your private layer. Or you can have an <code>autoload</code> directory and put multiple files’ worth of functions in it, just named whatever you want I guess.</li>
</ul>
</section>
<section id="keybindings" class="level2">
<h2>Keybindings</h2>
<p>The keybindings in Doom are both like and unlike those in Spacemacs. They have the same multi-level branching key sequence thing going on, and a lot of the top-level “categorizing” bindings are the same: <code>w</code> for windows, <code>b</code> for buffers, etc.</p>
<p>Unfortunately (for you and me as Spacemacs refugees) the bindings are also <em>just</em> different enough to trip you up. <code>SPC b [</code> and <code>SPC b ]</code> go to the previous or next buffer instead of <code>SPC b p</code> and <code>SPC b n</code>. You open Magit’s status with <code>SPC g g</code> instead of <code>SPC g s</code>. Perhaps worst of all, “save what I’m working on now” is a <em>buffer</em> command under <code>SPC b s</code> instead of a <em>file</em> command at <code>SPC f s</code>.</p>
<p>Fortunately you’re probably acquainted with both Vim <em>and</em> Emacs so remapping keys is second nature to you. The Doom way to do it is to use the <code>map!</code> macro.</p>
<p>As of this writing, <code>map!</code> isn’t terribly well documented in Doom’s actual documentation, but it is in the code, so search for <code>defmacro map!</code> in the repo and read the comment. For supplementary material, refer to my example auxiliary config file, in which I’m depositing all my bindings transferred over from Spacemacs so all that muscle memory doesn’t go to waste. Feel free to <a href="https://github.com/valrus/doom-private-module/blob/master/%2Bspacemacs-bindings.el">copy it for yourself</a>, and if you do, don’t forget to <code>load</code> it from your <code>config.el</code>!</p>
</section>
<section id="adding-packages" class="level2">
<h2>Adding packages</h2>
<p>Doom comes with a pretty good swath of functionality built in, but since you’re a Spacemacs user you’ll probably find some things you miss before too long. Here’s the basics of how you add a package to Doom, with <code>linum-relative</code> as an example:</p>
<ol type="1">
<li>Add <code>(package! linum-relative)</code> to your <code>packages.el</code></li>
<li>Add a <code>def-package!</code> call to your <code>config.el</code>. This one turns on relative line numbers in all buffers and makes sure they use the new <a href="https://www.gnu.org/software/emacs/news/NEWS.26.1">native line numbers</a> in Emacs 26:</li>
</ol>
<pre><code>(def-package! linum-relative
  :config
  (setq linum-relative-backend &#39;display-line-numbers-mode)
  (linum-relative-global-mode))</code></pre>
<ol start="3" type="1">
<li>Important and completely different from Spacemacs! Run <code>make install</code> in your <code>~/.emacs.d</code> directory. This will actually install the new package.</li>
<li>Restart Emacs, or run the <code>doom/reload</code> command with <code>SPC :</code>. (Or use the key sequence <code>SPC h R</code>.)</li>
</ol>
</section>
<section id="other-resources" class="level2">
<h2>Other resources</h2>
<p>If you’re a Spacemacs user and thinking about trying Doom, I hope this helps you! Here are a couple other blog posts that could be helpful:</p>
<ul>
<li>Aria Edmonds’s <a href="https://medium.com/@aria_39488/getting-started-with-doom-emacs-a-great-transition-from-vim-to-emacs-9bab8e0d8458">Getting started with Doom Emacs</a></li>
<li>Justin DeMaris’s <a href="https://medium.com/urbint-engineering/emacs-doom-for-newbies-1f8038604e3b">Emacs Doom for Newbies</a></li>
</ul>
<p>Finally, please feel free to check out my <a href="https://github.com/valrus/doom-private-module">personal Doom config</a> if you want a starting point. And here are some others that might provide inspiration:</p>
<ul>
<li><a href="https://github.com/hlissner/doom-emacs-private">the Doom developer’s</a>, assuredly a better canonical example than mine of How To Do Things</li>
<li><a href="https://github.com/Emiller88/doom-emacs-private">Emiller88’s</a>, a fairly simple example of a “literate” config which looks lovely in GitHub</li>
<li><a href="https://github.com/fuxialexander/doom-emacs-private-xfu">fuxialexander’s</a>, a more complex config with lots of customization and added features</li>
<li><a href="https://github.com/ar1a/dotfiles/tree/master/emacs/.doom.d">ar1a’s</a>, as seen in her nice blog post linked above</li>
</ul>
<p>Happy Dooming!</p>
</section>


    <div class="thefooter">
        <div id="adjposts">
        <div id="prevpost">←<a href="/2018/04/14/Bayesian_Intootition/">Bayesian In-toot-ition</a></div><!--
     --><div id="nextpost"><a href="/2019/01/08/2018_Retrospective/">2018 Retrospective</a>→</div>
      </div>
      
        
        <div class="colophon">
            

            <p>Contact me? My email is my first initial and last name, which you can deduce from this website's URL, at gmail.com. I'm also on <a href="https://joinmastodon.org/">Mastodon</a> as <a rel="me" href="https://icosahedron.website/@valrus">@valrus@icosahedron.website</a>.</p>
            
<p>Images in this post are shown using a custom version of <a href="http://code.google.com/p/bytebox/">bytebox</a> modified to be even smaller.</p>

        </div>
    </div>
</article>

<script type="text/javascript">bytebox.init();</script>

  </body>
</html>