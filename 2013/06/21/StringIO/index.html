<!DOCTYPE html>

<html xmlns="https://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    

    <title>small clever rooms: StringIO</title>
    
      <meta http-equiv="content-type" content="text/html;charset=utf-8" />
      <link rel="icon" type="image/png" href="/assets/images/favicon.png" />
      <link rel="shortcut icon" type="image/png" href="/assets/images/favicon.png" />
      <link rel="stylesheet" type="text/css" href="/assets/css/colors.css" />
    
    <link rel="stylesheet" type="text/css" href="/assets/css/room.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/tufte-css/tufte.css" />

<link rel="stylesheet" type="text/css" href="/assets/css/blogpost.css" />

  </head>

  <body>
    
    <main>
        <nav class="navigation">
            
                <h1>
                    <a class="sitename" href="/">small clever rooms</a>
                </h1>
                
                    <ul class="navigation-list">
                        
                        
                        
                            
                                <li>
                                    <a href="/livingroom/">
                                        «
                                        living room
                                    </a>
                                </li>
                            
                        
                            
                                <li>
                                    <a href="/studio/">
                                        
                                        studio
                                    </a>
                                </li>
                            
                        
                            
                                <li>
                                    <a href="/study/">
                                        
                                        study
                                    </a>
                                </li>
                            
                        
                            
                                <li>
                                    <a href="/workshop/">
                                        
                                        workshop
                                    </a>
                                </li>
                            
                        
                            
                                <li>
                                    <a href="/outside/">
                                        
                                        outside
                                    </a>
                                </li>
                            
                        
                    </ul>
                
            
        </nav>
        
<article>
    <h1>StringIO</h1>
    
    <p>I recently discovered the <code>StringIO</code> module and have been
using it surprisingly often. It’s not a terribly flashy module, being
roughly equivalent to a C++ <code>stringstream</code>, but it is proving
useful more than I expected. There are a couple use cases that have come
up more than once just in the last couple weeks:</p>
<ul>
<li>I’m trying to run a command that produces output to stdout and read
that output with a function that expects a file. Instead of piping the
command’s output to a file, I can just initialize a
<code>StringIO</code> with the result of
<code>subprocess.check_output()</code> and pass it into the function.
Intermediate files suck and I hate them. Using a <code>StringIO</code>,
by contrast, is so fresh and so clean, clean.</li>
<li>I’m trying to write unit tests for functions or methods that read
things from files. A unit test that depends on a file isn’t very, you
know, unit-y. So instead I can keep it all in the test suite by putting
the contents of a test file into a <code>StringIO</code> and passing
that to the function or method I want to test. Poof, no filthy,
error-prone external files sitting around and begriming the purity of my
unit tests.</li>
</ul>
<p>In retrospect, at least the second of these things seems obvious:
like it should be a bog-standard way to write unit tests that don’t
depend on external resources. But I’ve done a fair amount of cruising
StackOverflow and other places looking at Python unit test best
practices and haven’t ever stumbled across it before.</p>

</article>

        <footer>
            <div id="post-tags">
    
        Tagged <span>&raquo;</span>
        
            <code><a href="/livingroom/tags/python/">python</a></code>
        
    
</div>
<div id="adjacent-posts">
    <div id="older-post">
        
    </div>
    <div id="newer-post">
        
        <div class="newer-link">
            <a href="/2013/07/16/2013_Music_Halfway_Point/">2013 Music Halfway Point</a>
        </div>
        <div class="arrow">→</div>
        
    </div>
</div>

            
            <div class="colophon">
                
                    <p>
                        Contact me via <a href="mailto:ian@mccowan.space">email</a>.
                        I'm also on <a href="https://joinmastodon.org/">Mastodon</a>
                        as <a rel="me" href="https://icosahedron.website/@valrus">@valrus@icosahedron.website</a>,
                        and on <a rel="me" href="https://github.com/valrus">GitHub</a>.
                    </p>
                
            </div>
        </footer>
    </main>

  </body>
</html>